[
  {
    "id": "model_api",
    "title": "Generated API Handler",
    "path": "app/service-core/transport/skeleton/route.go",
    "lang": "go",
    "description": "Type-safe RPC handlers automatically generated for your data model.",
    "html": "<pre class=\"shiki github-dark\" style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#F97583\">package</span><span style=\"color:#B392F0\"> skeleton</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">import</span><span style=\"color:#E1E4E8\"> (</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">context</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">errors</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">fmt</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tproto </span><span style=\"color:#9ECBFF\">\"</span><span style=\"color:#B392F0\">gofast/gen/proto/v1</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">gofast/pkg</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">gofast/service-core/domain/skeleton</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">gofast/service-core/storage/query</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">time</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">connectrpc.com/connect</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">github.com/google/uuid</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">type</span><span style=\"color:#B392F0\"> Server</span><span style=\"color:#F97583\"> struct</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tdeps </span><span style=\"color:#B392F0\">skeleton</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Deps</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">func</span><span style=\"color:#B392F0\"> NewSkeletonServer</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#FFAB70\">deps</span><span style=\"color:#B392F0\"> skeleton</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Deps</span><span style=\"color:#E1E4E8\">) </span><span style=\"color:#F97583\">*</span><span style=\"color:#B392F0\">Server</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\treturn</span><span style=\"color:#F97583\"> &#x26;</span><span style=\"color:#B392F0\">Server</span><span style=\"color:#E1E4E8\">{deps: deps}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">func</span><span style=\"color:#B392F0\"> queryToProto</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#FFAB70\">skeleton</span><span style=\"color:#F97583\"> *</span><span style=\"color:#B392F0\">query</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Skeleton</span><span style=\"color:#E1E4E8\">) </span><span style=\"color:#F97583\">*</span><span style=\"color:#B392F0\">proto</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Skeleton</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\treturn</span><span style=\"color:#F97583\"> &#x26;</span><span style=\"color:#B392F0\">proto</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Skeleton</span><span style=\"color:#E1E4E8\">{</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\tId:      skeleton.ID.</span><span style=\"color:#B392F0\">String</span><span style=\"color:#E1E4E8\">(),</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\tCreated: skeleton.Created.</span><span style=\"color:#B392F0\">Format</span><span style=\"color:#E1E4E8\">(time.RFC3339),</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\tUpdated: skeleton.Updated.</span><span style=\"color:#B392F0\">Format</span><span style=\"color:#E1E4E8\">(time.RFC3339),</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\tName:    skeleton.Name,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\tAge:     skeleton.Age,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\tDeath:   skeleton.Death.</span><span style=\"color:#B392F0\">Format</span><span style=\"color:#E1E4E8\">(time.RFC3339),</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\tZombie:  skeleton.Zombie,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">func</span><span style=\"color:#E1E4E8\"> (</span><span style=\"color:#FFAB70\">s </span><span style=\"color:#F97583\">*</span><span style=\"color:#B392F0\">Server</span><span style=\"color:#E1E4E8\">) </span><span style=\"color:#B392F0\">GetAllSkeletons</span><span style=\"color:#E1E4E8\">(</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">\tctx</span><span style=\"color:#B392F0\"> context</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Context</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">\t_</span><span style=\"color:#F97583\"> *</span><span style=\"color:#B392F0\">connect</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Request</span><span style=\"color:#E1E4E8\">[</span><span style=\"color:#B392F0\">proto</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">GetAllSkeletonsRequest</span><span style=\"color:#E1E4E8\">],</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">\tstream</span><span style=\"color:#F97583\"> *</span><span style=\"color:#B392F0\">connect</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">ServerStream</span><span style=\"color:#E1E4E8\">[</span><span style=\"color:#B392F0\">proto</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">GetAllSkeletonsResponse</span><span style=\"color:#E1E4E8\">],</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">) </span><span style=\"color:#F97583\">error</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tprocessor </span><span style=\"color:#F97583\">:=</span><span style=\"color:#F97583\"> func</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#FFAB70\">_</span><span style=\"color:#B392F0\"> context</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Context</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">skel</span><span style=\"color:#F97583\"> *</span><span style=\"color:#B392F0\">query</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Skeleton</span><span style=\"color:#E1E4E8\">) </span><span style=\"color:#F97583\">error</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\tif</span><span style=\"color:#E1E4E8\"> ctx.</span><span style=\"color:#B392F0\">Err</span><span style=\"color:#E1E4E8\">() </span><span style=\"color:#F97583\">!=</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\t\treturn</span><span style=\"color:#B392F0\"> pkg</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">InternalError</span><span style=\"color:#E1E4E8\">{Err: ctx.</span><span style=\"color:#B392F0\">Err</span><span style=\"color:#E1E4E8\">()}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\t}</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#E1E4E8\"> stream.</span><span style=\"color:#B392F0\">Send</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#F97583\">&#x26;</span><span style=\"color:#B392F0\">proto</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">GetAllSkeletonsResponse</span><span style=\"color:#E1E4E8\">{Skeleton: </span><span style=\"color:#B392F0\">queryToProto</span><span style=\"color:#E1E4E8\">(skel)})</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\terr </span><span style=\"color:#F97583\">:=</span><span style=\"color:#E1E4E8\"> skeleton.</span><span style=\"color:#B392F0\">GetAllSkeletons</span><span style=\"color:#E1E4E8\">(ctx, </span><span style=\"color:#F97583\">&#x26;</span><span style=\"color:#E1E4E8\">s.deps, processor)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tif</span><span style=\"color:#E1E4E8\"> err </span><span style=\"color:#F97583\">!=</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#E1E4E8\"> fmt.</span><span style=\"color:#B392F0\">Errorf</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">\"error getting all skeletons: </span><span style=\"color:#79B8FF\">%w</span><span style=\"color:#9ECBFF\">\"</span><span style=\"color:#E1E4E8\">, err)</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\treturn</span><span style=\"color:#79B8FF\"> nil</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">func</span><span style=\"color:#E1E4E8\"> (</span><span style=\"color:#FFAB70\">s </span><span style=\"color:#F97583\">*</span><span style=\"color:#B392F0\">Server</span><span style=\"color:#E1E4E8\">) </span><span style=\"color:#B392F0\">GetSkeletonByID</span><span style=\"color:#E1E4E8\">(</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">\tctx</span><span style=\"color:#B392F0\"> context</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Context</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">\treq</span><span style=\"color:#F97583\"> *</span><span style=\"color:#B392F0\">connect</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Request</span><span style=\"color:#E1E4E8\">[</span><span style=\"color:#B392F0\">proto</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">GetSkeletonByIDRequest</span><span style=\"color:#E1E4E8\">],</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">) (</span><span style=\"color:#F97583\">*</span><span style=\"color:#B392F0\">connect</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Response</span><span style=\"color:#E1E4E8\">[</span><span style=\"color:#B392F0\">proto</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">GetSkeletonByIDResponse</span><span style=\"color:#E1E4E8\">], </span><span style=\"color:#F97583\">error</span><span style=\"color:#E1E4E8\">) {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tid, err </span><span style=\"color:#F97583\">:=</span><span style=\"color:#E1E4E8\"> uuid.</span><span style=\"color:#B392F0\">Parse</span><span style=\"color:#E1E4E8\">(req.Msg.</span><span style=\"color:#B392F0\">GetId</span><span style=\"color:#E1E4E8\">())</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tif</span><span style=\"color:#E1E4E8\"> err </span><span style=\"color:#F97583\">!=</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#B392F0\">pkg</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">BadRequestError</span><span style=\"color:#E1E4E8\">{Err: err}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tskel, err </span><span style=\"color:#F97583\">:=</span><span style=\"color:#E1E4E8\"> skeleton.</span><span style=\"color:#B392F0\">GetSkeletonByID</span><span style=\"color:#E1E4E8\">(ctx, </span><span style=\"color:#F97583\">&#x26;</span><span style=\"color:#E1E4E8\">s.deps, id)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tif</span><span style=\"color:#E1E4E8\"> err </span><span style=\"color:#F97583\">!=</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\">, fmt.</span><span style=\"color:#B392F0\">Errorf</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">\"error getting skeleton by id: </span><span style=\"color:#79B8FF\">%w</span><span style=\"color:#9ECBFF\">\"</span><span style=\"color:#E1E4E8\">, err)</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">\treturn</span><span style=\"color:#E1E4E8\"> connect.</span><span style=\"color:#B392F0\">NewResponse</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#F97583\">&#x26;</span><span style=\"color:#B392F0\">proto</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">GetSkeletonByIDResponse</span><span style=\"color:#E1E4E8\">{Skeleton: </span><span style=\"color:#B392F0\">queryToProto</span><span style=\"color:#E1E4E8\">(skel)}), </span><span style=\"color:#79B8FF\">nil</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">func</span><span style=\"color:#E1E4E8\"> (</span><span style=\"color:#FFAB70\">s </span><span style=\"color:#F97583\">*</span><span style=\"color:#B392F0\">Server</span><span style=\"color:#E1E4E8\">) </span><span style=\"color:#B392F0\">CreateSkeleton</span><span style=\"color:#E1E4E8\">(</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">\tctx</span><span style=\"color:#B392F0\"> context</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Context</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">\treq</span><span style=\"color:#F97583\"> *</span><span style=\"color:#B392F0\">connect</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Request</span><span style=\"color:#E1E4E8\">[</span><span style=\"color:#B392F0\">proto</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">CreateSkeletonRequest</span><span style=\"color:#E1E4E8\">],</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">) (</span><span style=\"color:#F97583\">*</span><span style=\"color:#B392F0\">connect</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Response</span><span style=\"color:#E1E4E8\">[</span><span style=\"color:#B392F0\">proto</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">CreateSkeletonResponse</span><span style=\"color:#E1E4E8\">], </span><span style=\"color:#F97583\">error</span><span style=\"color:#E1E4E8\">) {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tif</span><span style=\"color:#E1E4E8\"> req.Msg.</span><span style=\"color:#B392F0\">GetSkeleton</span><span style=\"color:#E1E4E8\">() </span><span style=\"color:#F97583\">==</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#B392F0\">pkg</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">BadRequestError</span><span style=\"color:#E1E4E8\">{Err: errors.</span><span style=\"color:#B392F0\">New</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">\"skeleton is nil\"</span><span style=\"color:#E1E4E8\">)}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tcreated, err </span><span style=\"color:#F97583\">:=</span><span style=\"color:#E1E4E8\"> skeleton.</span><span style=\"color:#B392F0\">CreateSkeleton</span><span style=\"color:#E1E4E8\">(ctx, </span><span style=\"color:#F97583\">&#x26;</span><span style=\"color:#E1E4E8\">s.deps, req.Msg)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tif</span><span style=\"color:#E1E4E8\"> err </span><span style=\"color:#F97583\">!=</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\">, fmt.</span><span style=\"color:#B392F0\">Errorf</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">\"error creating skeleton: </span><span style=\"color:#79B8FF\">%w</span><span style=\"color:#9ECBFF\">\"</span><span style=\"color:#E1E4E8\">, err)</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">\treturn</span><span style=\"color:#E1E4E8\"> connect.</span><span style=\"color:#B392F0\">NewResponse</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#F97583\">&#x26;</span><span style=\"color:#B392F0\">proto</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">CreateSkeletonResponse</span><span style=\"color:#E1E4E8\">{Skeleton: </span><span style=\"color:#B392F0\">queryToProto</span><span style=\"color:#E1E4E8\">(created)}), </span><span style=\"color:#79B8FF\">nil</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">func</span><span style=\"color:#E1E4E8\"> (</span><span style=\"color:#FFAB70\">s </span><span style=\"color:#F97583\">*</span><span style=\"color:#B392F0\">Server</span><span style=\"color:#E1E4E8\">) </span><span style=\"color:#B392F0\">EditSkeleton</span><span style=\"color:#E1E4E8\">(</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">\tctx</span><span style=\"color:#B392F0\"> context</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Context</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">\treq</span><span style=\"color:#F97583\"> *</span><span style=\"color:#B392F0\">connect</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Request</span><span style=\"color:#E1E4E8\">[</span><span style=\"color:#B392F0\">proto</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">EditSkeletonRequest</span><span style=\"color:#E1E4E8\">],</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">) (</span><span style=\"color:#F97583\">*</span><span style=\"color:#B392F0\">connect</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Response</span><span style=\"color:#E1E4E8\">[</span><span style=\"color:#B392F0\">proto</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">EditSkeletonResponse</span><span style=\"color:#E1E4E8\">], </span><span style=\"color:#F97583\">error</span><span style=\"color:#E1E4E8\">) {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tif</span><span style=\"color:#E1E4E8\"> req.Msg.</span><span style=\"color:#B392F0\">GetSkeleton</span><span style=\"color:#E1E4E8\">() </span><span style=\"color:#F97583\">==</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#B392F0\">pkg</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">BadRequestError</span><span style=\"color:#E1E4E8\">{Err: errors.</span><span style=\"color:#B392F0\">New</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">\"skeleton is nil\"</span><span style=\"color:#E1E4E8\">)}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tedited, err </span><span style=\"color:#F97583\">:=</span><span style=\"color:#E1E4E8\"> skeleton.</span><span style=\"color:#B392F0\">EditSkeleton</span><span style=\"color:#E1E4E8\">(ctx, </span><span style=\"color:#F97583\">&#x26;</span><span style=\"color:#E1E4E8\">s.deps, req.Msg)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tif</span><span style=\"color:#E1E4E8\"> err </span><span style=\"color:#F97583\">!=</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\">, fmt.</span><span style=\"color:#B392F0\">Errorf</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">\"error editing skeleton: </span><span style=\"color:#79B8FF\">%w</span><span style=\"color:#9ECBFF\">\"</span><span style=\"color:#E1E4E8\">, err)</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">\treturn</span><span style=\"color:#E1E4E8\"> connect.</span><span style=\"color:#B392F0\">NewResponse</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#F97583\">&#x26;</span><span style=\"color:#B392F0\">proto</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">EditSkeletonResponse</span><span style=\"color:#E1E4E8\">{Skeleton: </span><span style=\"color:#B392F0\">queryToProto</span><span style=\"color:#E1E4E8\">(edited)}), </span><span style=\"color:#79B8FF\">nil</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">func</span><span style=\"color:#E1E4E8\"> (</span><span style=\"color:#FFAB70\">s </span><span style=\"color:#F97583\">*</span><span style=\"color:#B392F0\">Server</span><span style=\"color:#E1E4E8\">) </span><span style=\"color:#B392F0\">RemoveSkeleton</span><span style=\"color:#E1E4E8\">(</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">\tctx</span><span style=\"color:#B392F0\"> context</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Context</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">\treq</span><span style=\"color:#F97583\"> *</span><span style=\"color:#B392F0\">connect</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Request</span><span style=\"color:#E1E4E8\">[</span><span style=\"color:#B392F0\">proto</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">RemoveSkeletonRequest</span><span style=\"color:#E1E4E8\">],</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">) (</span><span style=\"color:#F97583\">*</span><span style=\"color:#B392F0\">connect</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Response</span><span style=\"color:#E1E4E8\">[</span><span style=\"color:#B392F0\">proto</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">RemoveSkeletonResponse</span><span style=\"color:#E1E4E8\">], </span><span style=\"color:#F97583\">error</span><span style=\"color:#E1E4E8\">) {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tid, err </span><span style=\"color:#F97583\">:=</span><span style=\"color:#E1E4E8\"> uuid.</span><span style=\"color:#B392F0\">Parse</span><span style=\"color:#E1E4E8\">(req.Msg.</span><span style=\"color:#B392F0\">GetId</span><span style=\"color:#E1E4E8\">())</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tif</span><span style=\"color:#E1E4E8\"> err </span><span style=\"color:#F97583\">!=</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#B392F0\">pkg</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">BadRequestError</span><span style=\"color:#E1E4E8\">{Err: err}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\terr </span><span style=\"color:#F97583\">=</span><span style=\"color:#E1E4E8\"> skeleton.</span><span style=\"color:#B392F0\">RemoveSkeleton</span><span style=\"color:#E1E4E8\">(ctx, </span><span style=\"color:#F97583\">&#x26;</span><span style=\"color:#E1E4E8\">s.deps, id)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tif</span><span style=\"color:#E1E4E8\"> err </span><span style=\"color:#F97583\">!=</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\">, fmt.</span><span style=\"color:#B392F0\">Errorf</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">\"error removing skeleton: </span><span style=\"color:#79B8FF\">%w</span><span style=\"color:#9ECBFF\">\"</span><span style=\"color:#E1E4E8\">, err)</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">\treturn</span><span style=\"color:#E1E4E8\"> connect.</span><span style=\"color:#B392F0\">NewResponse</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#F97583\">&#x26;</span><span style=\"color:#B392F0\">proto</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">RemoveSkeletonResponse</span><span style=\"color:#E1E4E8\">{}), </span><span style=\"color:#79B8FF\">nil</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span></code></pre>"
  },
  {
    "id": "model_service",
    "title": "Generated Service",
    "path": "app/service-core/domain/skeleton/service.go",
    "lang": "go",
    "description": "Clean business logic layer with validation, auth, and tracing hooks.",
    "html": "<pre class=\"shiki github-dark\" style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#F97583\">package</span><span style=\"color:#B392F0\"> skeleton</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">import</span><span style=\"color:#E1E4E8\"> (</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">context</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">fmt</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">gofast/pkg</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">gofast/pkg/auth</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tot </span><span style=\"color:#9ECBFF\">\"</span><span style=\"color:#B392F0\">gofast/pkg/otel</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">gofast/service-core/storage/query</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tproto </span><span style=\"color:#9ECBFF\">\"</span><span style=\"color:#B392F0\">gofast/gen/proto/v1</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">github.com/google/uuid</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">type</span><span style=\"color:#B392F0\"> Deps</span><span style=\"color:#F97583\"> struct</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tStore </span><span style=\"color:#F97583\">*</span><span style=\"color:#B392F0\">query</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Queries</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">func</span><span style=\"color:#B392F0\"> GetAllSkeletons</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#FFAB70\">ctx</span><span style=\"color:#B392F0\"> context</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Context</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">d</span><span style=\"color:#F97583\"> *</span><span style=\"color:#B392F0\">Deps</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">processor</span><span style=\"color:#F97583\"> func</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#FFAB70\">ctx</span><span style=\"color:#B392F0\"> context</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Context</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">user</span><span style=\"color:#F97583\"> *</span><span style=\"color:#B392F0\">query</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Skeleton</span><span style=\"color:#E1E4E8\">) </span><span style=\"color:#F97583\">error</span><span style=\"color:#E1E4E8\">) (</span><span style=\"color:#FFAB70\">err</span><span style=\"color:#F97583\"> error</span><span style=\"color:#E1E4E8\">) {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tctx, span, done </span><span style=\"color:#F97583\">:=</span><span style=\"color:#E1E4E8\"> ot.</span><span style=\"color:#B392F0\">StartSpan</span><span style=\"color:#E1E4E8\">(ctx, </span><span style=\"color:#9ECBFF\">\"skeleton.service.GetAllSkeletons\"</span><span style=\"color:#E1E4E8\">)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tdefer</span><span style=\"color:#F97583\"> func</span><span style=\"color:#E1E4E8\">() { </span><span style=\"color:#B392F0\">done</span><span style=\"color:#E1E4E8\">(err) }()</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tclaims, err </span><span style=\"color:#F97583\">:=</span><span style=\"color:#E1E4E8\"> auth.</span><span style=\"color:#B392F0\">Authorize</span><span style=\"color:#E1E4E8\">(ctx, span, auth.GetSkeletons)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tif</span><span style=\"color:#E1E4E8\"> err </span><span style=\"color:#F97583\">!=</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#B392F0\"> pkg</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">ForbiddenError</span><span style=\"color:#E1E4E8\">{Err: err}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tskeletons, err </span><span style=\"color:#F97583\">:=</span><span style=\"color:#E1E4E8\"> d.Store.</span><span style=\"color:#B392F0\">SelectAllSkeletons</span><span style=\"color:#E1E4E8\">(ctx, claims.ID)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tif</span><span style=\"color:#E1E4E8\"> err </span><span style=\"color:#F97583\">!=</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#B392F0\"> pkg</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">NotFoundError</span><span style=\"color:#E1E4E8\">{Err: err}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tspan.</span><span style=\"color:#B392F0\">AddEvent</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">\"Skeletons selected from store\"</span><span style=\"color:#E1E4E8\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tfor</span><span style=\"color:#E1E4E8\"> _, s </span><span style=\"color:#F97583\">:=</span><span style=\"color:#F97583\"> range</span><span style=\"color:#E1E4E8\"> skeletons {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\terr </span><span style=\"color:#F97583\">=</span><span style=\"color:#B392F0\"> processor</span><span style=\"color:#E1E4E8\">(ctx, </span><span style=\"color:#F97583\">&#x26;</span><span style=\"color:#E1E4E8\">s)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\tif</span><span style=\"color:#E1E4E8\"> err </span><span style=\"color:#F97583\">!=</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\t\treturn</span><span style=\"color:#B392F0\"> pkg</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">InternalError</span><span style=\"color:#E1E4E8\">{Err: err}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\t}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\treturn</span><span style=\"color:#79B8FF\"> nil</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">func</span><span style=\"color:#B392F0\"> GetSkeletonByID</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#FFAB70\">ctx</span><span style=\"color:#B392F0\"> context</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Context</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">d</span><span style=\"color:#F97583\"> *</span><span style=\"color:#B392F0\">Deps</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">id</span><span style=\"color:#B392F0\"> uuid</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">UUID</span><span style=\"color:#E1E4E8\">) (</span><span style=\"color:#FFAB70\">result</span><span style=\"color:#F97583\"> *</span><span style=\"color:#B392F0\">query</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Skeleton</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">err</span><span style=\"color:#F97583\"> error</span><span style=\"color:#E1E4E8\">) {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tctx, span, done </span><span style=\"color:#F97583\">:=</span><span style=\"color:#E1E4E8\"> ot.</span><span style=\"color:#B392F0\">StartSpan</span><span style=\"color:#E1E4E8\">(ctx, </span><span style=\"color:#9ECBFF\">\"skeleton.service.GetSkeletonByID\"</span><span style=\"color:#E1E4E8\">)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tdefer</span><span style=\"color:#F97583\"> func</span><span style=\"color:#E1E4E8\">() { </span><span style=\"color:#B392F0\">done</span><span style=\"color:#E1E4E8\">(err) }()</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tclaims, err </span><span style=\"color:#F97583\">:=</span><span style=\"color:#E1E4E8\"> auth.</span><span style=\"color:#B392F0\">Authorize</span><span style=\"color:#E1E4E8\">(ctx, span, auth.GetSkeletons)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tif</span><span style=\"color:#E1E4E8\"> err </span><span style=\"color:#F97583\">!=</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#B392F0\">pkg</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">ForbiddenError</span><span style=\"color:#E1E4E8\">{Err: err}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tskeleton, err </span><span style=\"color:#F97583\">:=</span><span style=\"color:#E1E4E8\"> d.Store.</span><span style=\"color:#B392F0\">SelectSkeletonByID</span><span style=\"color:#E1E4E8\">(ctx, </span><span style=\"color:#B392F0\">query</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">SelectSkeletonByIDParams</span><span style=\"color:#E1E4E8\">{</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\tID:     id,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\tUserID: claims.ID,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t})</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tif</span><span style=\"color:#E1E4E8\"> err </span><span style=\"color:#F97583\">!=</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#B392F0\">pkg</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">NotFoundError</span><span style=\"color:#E1E4E8\">{Err: err}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tspan.</span><span style=\"color:#B392F0\">AddEvent</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">\"Skeleton selected from store\"</span><span style=\"color:#E1E4E8\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">\treturn</span><span style=\"color:#F97583\"> &#x26;</span><span style=\"color:#E1E4E8\">skeleton, </span><span style=\"color:#79B8FF\">nil</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">func</span><span style=\"color:#B392F0\"> CreateSkeleton</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#FFAB70\">ctx</span><span style=\"color:#B392F0\"> context</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Context</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">d</span><span style=\"color:#F97583\"> *</span><span style=\"color:#B392F0\">Deps</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">req</span><span style=\"color:#F97583\"> *</span><span style=\"color:#B392F0\">proto</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">CreateSkeletonRequest</span><span style=\"color:#E1E4E8\">) (</span><span style=\"color:#FFAB70\">result</span><span style=\"color:#F97583\"> *</span><span style=\"color:#B392F0\">query</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Skeleton</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">err</span><span style=\"color:#F97583\"> error</span><span style=\"color:#E1E4E8\">) {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tctx, span, done </span><span style=\"color:#F97583\">:=</span><span style=\"color:#E1E4E8\"> ot.</span><span style=\"color:#B392F0\">StartSpan</span><span style=\"color:#E1E4E8\">(ctx, </span><span style=\"color:#9ECBFF\">\"skeleton.service.CreateSkeleton\"</span><span style=\"color:#E1E4E8\">)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tdefer</span><span style=\"color:#F97583\"> func</span><span style=\"color:#E1E4E8\">() { </span><span style=\"color:#B392F0\">done</span><span style=\"color:#E1E4E8\">(err) }()</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tclaims, err </span><span style=\"color:#F97583\">:=</span><span style=\"color:#E1E4E8\"> auth.</span><span style=\"color:#B392F0\">Authorize</span><span style=\"color:#E1E4E8\">(ctx, span, auth.CreateSkeleton)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tif</span><span style=\"color:#E1E4E8\"> err </span><span style=\"color:#F97583\">!=</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#B392F0\">pkg</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">ForbiddenError</span><span style=\"color:#E1E4E8\">{Err: err}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tparams, validation </span><span style=\"color:#F97583\">:=</span><span style=\"color:#B392F0\"> ValidateAndBuildInsertParams</span><span style=\"color:#E1E4E8\">(claims.ID, req.</span><span style=\"color:#B392F0\">GetSkeleton</span><span style=\"color:#E1E4E8\">())</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tif</span><span style=\"color:#E1E4E8\"> validation </span><span style=\"color:#F97583\">!=</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\">, fmt.</span><span style=\"color:#B392F0\">Errorf</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">\"validation errors: </span><span style=\"color:#79B8FF\">%w</span><span style=\"color:#9ECBFF\">\"</span><span style=\"color:#E1E4E8\">, pkg.</span><span style=\"color:#B392F0\">ValidationErrors</span><span style=\"color:#E1E4E8\">(validation))</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tspan.</span><span style=\"color:#B392F0\">AddEvent</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">\"Validation successful\"</span><span style=\"color:#E1E4E8\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tskeleton, err </span><span style=\"color:#F97583\">:=</span><span style=\"color:#E1E4E8\"> d.Store.</span><span style=\"color:#B392F0\">InsertSkeleton</span><span style=\"color:#E1E4E8\">(ctx, </span><span style=\"color:#F97583\">*</span><span style=\"color:#E1E4E8\">params)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tif</span><span style=\"color:#E1E4E8\"> err </span><span style=\"color:#F97583\">!=</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#B392F0\">pkg</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">InternalError</span><span style=\"color:#E1E4E8\">{Err: err}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tspan.</span><span style=\"color:#B392F0\">AddEvent</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">\"Skeleton inserted into store\"</span><span style=\"color:#E1E4E8\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">\treturn</span><span style=\"color:#F97583\"> &#x26;</span><span style=\"color:#E1E4E8\">skeleton, </span><span style=\"color:#79B8FF\">nil</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">func</span><span style=\"color:#B392F0\"> EditSkeleton</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#FFAB70\">ctx</span><span style=\"color:#B392F0\"> context</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Context</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">d</span><span style=\"color:#F97583\"> *</span><span style=\"color:#B392F0\">Deps</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">req</span><span style=\"color:#F97583\"> *</span><span style=\"color:#B392F0\">proto</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">EditSkeletonRequest</span><span style=\"color:#E1E4E8\">) (</span><span style=\"color:#FFAB70\">result</span><span style=\"color:#F97583\"> *</span><span style=\"color:#B392F0\">query</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Skeleton</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">err</span><span style=\"color:#F97583\"> error</span><span style=\"color:#E1E4E8\">) {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tctx, span, done </span><span style=\"color:#F97583\">:=</span><span style=\"color:#E1E4E8\"> ot.</span><span style=\"color:#B392F0\">StartSpan</span><span style=\"color:#E1E4E8\">(ctx, </span><span style=\"color:#9ECBFF\">\"skeleton.service.EditSkeleton\"</span><span style=\"color:#E1E4E8\">)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tdefer</span><span style=\"color:#F97583\"> func</span><span style=\"color:#E1E4E8\">() { </span><span style=\"color:#B392F0\">done</span><span style=\"color:#E1E4E8\">(err) }()</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tclaims, err </span><span style=\"color:#F97583\">:=</span><span style=\"color:#E1E4E8\"> auth.</span><span style=\"color:#B392F0\">Authorize</span><span style=\"color:#E1E4E8\">(ctx, span, auth.EditSkeleton)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tif</span><span style=\"color:#E1E4E8\"> err </span><span style=\"color:#F97583\">!=</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#B392F0\">pkg</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">ForbiddenError</span><span style=\"color:#E1E4E8\">{Err: err}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tparams, validation </span><span style=\"color:#F97583\">:=</span><span style=\"color:#B392F0\"> ValidateAndBuildUpdateParams</span><span style=\"color:#E1E4E8\">(claims.ID, req.</span><span style=\"color:#B392F0\">GetSkeleton</span><span style=\"color:#E1E4E8\">())</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tif</span><span style=\"color:#E1E4E8\"> validation </span><span style=\"color:#F97583\">!=</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\">, fmt.</span><span style=\"color:#B392F0\">Errorf</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">\"validation errors: </span><span style=\"color:#79B8FF\">%w</span><span style=\"color:#9ECBFF\">\"</span><span style=\"color:#E1E4E8\">, pkg.</span><span style=\"color:#B392F0\">ValidationErrors</span><span style=\"color:#E1E4E8\">(validation))</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tspan.</span><span style=\"color:#B392F0\">AddEvent</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">\"Validation successful\"</span><span style=\"color:#E1E4E8\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tskeleton, err </span><span style=\"color:#F97583\">:=</span><span style=\"color:#E1E4E8\"> d.Store.</span><span style=\"color:#B392F0\">UpdateSkeleton</span><span style=\"color:#E1E4E8\">(ctx, </span><span style=\"color:#F97583\">*</span><span style=\"color:#E1E4E8\">params)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tif</span><span style=\"color:#E1E4E8\"> err </span><span style=\"color:#F97583\">!=</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#B392F0\">pkg</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">InternalError</span><span style=\"color:#E1E4E8\">{Err: err}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tspan.</span><span style=\"color:#B392F0\">AddEvent</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">\"Skeleton updated in store\"</span><span style=\"color:#E1E4E8\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">\treturn</span><span style=\"color:#F97583\"> &#x26;</span><span style=\"color:#E1E4E8\">skeleton, </span><span style=\"color:#79B8FF\">nil</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">func</span><span style=\"color:#B392F0\"> RemoveSkeleton</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#FFAB70\">ctx</span><span style=\"color:#B392F0\"> context</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Context</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">d</span><span style=\"color:#F97583\"> *</span><span style=\"color:#B392F0\">Deps</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">id</span><span style=\"color:#B392F0\"> uuid</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">UUID</span><span style=\"color:#E1E4E8\">) (</span><span style=\"color:#FFAB70\">err</span><span style=\"color:#F97583\"> error</span><span style=\"color:#E1E4E8\">) {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tctx, span, done </span><span style=\"color:#F97583\">:=</span><span style=\"color:#E1E4E8\"> ot.</span><span style=\"color:#B392F0\">StartSpan</span><span style=\"color:#E1E4E8\">(ctx, </span><span style=\"color:#9ECBFF\">\"skeleton.service.RemoveSkeleton\"</span><span style=\"color:#E1E4E8\">)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tdefer</span><span style=\"color:#F97583\"> func</span><span style=\"color:#E1E4E8\">() { </span><span style=\"color:#B392F0\">done</span><span style=\"color:#E1E4E8\">(err) }()</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tclaims, err </span><span style=\"color:#F97583\">:=</span><span style=\"color:#E1E4E8\"> auth.</span><span style=\"color:#B392F0\">Authorize</span><span style=\"color:#E1E4E8\">(ctx, span, auth.RemoveSkeleton)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tif</span><span style=\"color:#E1E4E8\"> err </span><span style=\"color:#F97583\">!=</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#B392F0\"> pkg</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">ForbiddenError</span><span style=\"color:#E1E4E8\">{Err: err}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\terr </span><span style=\"color:#F97583\">=</span><span style=\"color:#E1E4E8\"> d.Store.</span><span style=\"color:#B392F0\">DeleteSkeleton</span><span style=\"color:#E1E4E8\">(ctx, </span><span style=\"color:#B392F0\">query</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">DeleteSkeletonParams</span><span style=\"color:#E1E4E8\">{</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\tID:     id,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\tUserID: claims.ID,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t})</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tif</span><span style=\"color:#E1E4E8\"> err </span><span style=\"color:#F97583\">!=</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#B392F0\"> pkg</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">InternalError</span><span style=\"color:#E1E4E8\">{Err: err}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tspan.</span><span style=\"color:#B392F0\">AddEvent</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">\"Skeleton deleted from store\"</span><span style=\"color:#E1E4E8\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">\treturn</span><span style=\"color:#79B8FF\"> nil</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span></code></pre>"
  },
  {
    "id": "model_ui",
    "title": "Generated UI Page",
    "path": "app/service-client/src/routes/(app)/models/skeletons/+page.svelte",
    "lang": "svelte",
    "description": "Responsive CRUD table with loading states and error handling.",
    "html": "<pre class=\"shiki github-dark\" style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#E1E4E8\">&#x3C;</span><span style=\"color:#85E89D\">script</span><span style=\"color:#B392F0\"> lang</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"ts\"</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    import</span><span style=\"color:#E1E4E8\"> { resolve } </span><span style=\"color:#F97583\">from</span><span style=\"color:#9ECBFF\"> \"$app/paths\"</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    import</span><span style=\"color:#E1E4E8\"> { skeleton_client } </span><span style=\"color:#F97583\">from</span><span style=\"color:#9ECBFF\"> \"$lib/connect\"</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    import</span><span style=\"color:#F97583\"> type</span><span style=\"color:#E1E4E8\"> { Skeleton } </span><span style=\"color:#F97583\">from</span><span style=\"color:#9ECBFF\"> \"$lib/gen/proto/v1/skeleton_pb\"</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    import</span><span style=\"color:#E1E4E8\"> Confirmation </span><span style=\"color:#F97583\">from</span><span style=\"color:#9ECBFF\"> \"$lib/ui/confirmation.svelte\"</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    import</span><span style=\"color:#E1E4E8\"> { toast } </span><span style=\"color:#F97583\">from</span><span style=\"color:#9ECBFF\"> \"$lib/ui/toast.svelte\"</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    import</span><span style=\"color:#E1E4E8\"> { ConnectError } </span><span style=\"color:#F97583\">from</span><span style=\"color:#9ECBFF\"> \"@connectrpc/connect\"</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">    let</span><span style=\"color:#E1E4E8\"> skeletons </span><span style=\"color:#F97583\">=</span><span style=\"color:#E1E4E8\"> $</span><span style=\"color:#B392F0\">state</span><span style=\"color:#E1E4E8\">&#x3C;(</span><span style=\"color:#B392F0\">Skeleton</span><span style=\"color:#F97583\"> |</span><span style=\"color:#79B8FF\"> undefined</span><span style=\"color:#E1E4E8\">)[]>([]);</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    let</span><span style=\"color:#E1E4E8\"> item_id </span><span style=\"color:#F97583\">=</span><span style=\"color:#E1E4E8\"> $</span><span style=\"color:#B392F0\">state</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">\"\"</span><span style=\"color:#E1E4E8\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    (</span><span style=\"color:#F97583\">async</span><span style=\"color:#E1E4E8\"> () </span><span style=\"color:#F97583\">=></span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        for</span><span style=\"color:#F97583\"> await</span><span style=\"color:#E1E4E8\"> (</span><span style=\"color:#F97583\">const</span><span style=\"color:#79B8FF\"> res</span><span style=\"color:#F97583\"> of</span><span style=\"color:#E1E4E8\"> skeleton_client.</span><span style=\"color:#B392F0\">getAllSkeletons</span><span style=\"color:#E1E4E8\">({})) {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            skeletons.</span><span style=\"color:#B392F0\">push</span><span style=\"color:#E1E4E8\">(res.skeleton);</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        }</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    })();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">    async</span><span style=\"color:#F97583\"> function</span><span style=\"color:#B392F0\"> submit</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#FFAB70\">e</span><span style=\"color:#F97583\">:</span><span style=\"color:#B392F0\"> SubmitEvent</span><span style=\"color:#F97583\"> &#x26;</span><span style=\"color:#E1E4E8\"> { </span><span style=\"color:#FFAB70\">currentTarget</span><span style=\"color:#F97583\">:</span><span style=\"color:#B392F0\"> HTMLFormElement</span><span style=\"color:#E1E4E8\"> }) {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        e.</span><span style=\"color:#B392F0\">preventDefault</span><span style=\"color:#E1E4E8\">();</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        const</span><span style=\"color:#79B8FF\"> formData</span><span style=\"color:#F97583\"> =</span><span style=\"color:#F97583\"> new</span><span style=\"color:#B392F0\"> FormData</span><span style=\"color:#E1E4E8\">(e.currentTarget);</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        const</span><span style=\"color:#79B8FF\"> id</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> formData.</span><span style=\"color:#B392F0\">get</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">\"id\"</span><span style=\"color:#E1E4E8\">)?.</span><span style=\"color:#B392F0\">toString</span><span style=\"color:#E1E4E8\">();</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        const</span><span style=\"color:#79B8FF\"> modal</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> document.</span><span style=\"color:#B392F0\">getElementById</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">\"delete-dialog\"</span><span style=\"color:#E1E4E8\">) </span><span style=\"color:#F97583\">as</span><span style=\"color:#B392F0\"> HTMLDialogElement</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        modal?.</span><span style=\"color:#B392F0\">close</span><span style=\"color:#E1E4E8\">();</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        try</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">            await</span><span style=\"color:#E1E4E8\"> skeleton_client.</span><span style=\"color:#B392F0\">removeSkeleton</span><span style=\"color:#E1E4E8\">({ id });</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            toast.</span><span style=\"color:#B392F0\">warning</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">\"Success!\"</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#9ECBFF\">\"Skeleton deleted successfully.\"</span><span style=\"color:#E1E4E8\">);</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            skeletons </span><span style=\"color:#F97583\">=</span><span style=\"color:#E1E4E8\"> skeletons.</span><span style=\"color:#B392F0\">filter</span><span style=\"color:#E1E4E8\">((</span><span style=\"color:#FFAB70\">skeleton</span><span style=\"color:#E1E4E8\">) </span><span style=\"color:#F97583\">=></span><span style=\"color:#E1E4E8\"> skeleton?.id </span><span style=\"color:#F97583\">!==</span><span style=\"color:#E1E4E8\"> id);</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        } </span><span style=\"color:#F97583\">catch</span><span style=\"color:#E1E4E8\"> (error) {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">            const</span><span style=\"color:#79B8FF\"> err</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> ConnectError.</span><span style=\"color:#B392F0\">from</span><span style=\"color:#E1E4E8\">(error);</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            toast.</span><span style=\"color:#B392F0\">error</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">\"Error!\"</span><span style=\"color:#E1E4E8\">, err.message);</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">            return</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        }</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    }</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">&#x3C;/</span><span style=\"color:#85E89D\">script</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">&#x3C;</span><span style=\"color:#85E89D\">form</span><span style=\"color:#B392F0\"> onsubmit</span><span style=\"color:#E1E4E8\">={submit}></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    &#x3C;</span><span style=\"color:#85E89D\">input</span><span style=\"color:#B392F0\"> type</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"hidden\"</span><span style=\"color:#B392F0\"> name</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"id\"</span><span style=\"color:#B392F0\"> value</span><span style=\"color:#E1E4E8\">={item_id} /></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    &#x3C;</span><span style=\"color:#79B8FF\">Confirmation</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">        id</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"delete-dialog\"</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">        title</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"Delete\"</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">        message</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"Are you sure you want to delete this item? This action cannot be undone.\"</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    /></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">&#x3C;/</span><span style=\"color:#85E89D\">form</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">&#x3C;</span><span style=\"color:#85E89D\">div</span><span style=\"color:#B392F0\"> class</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"flex flex-col items-center justify-center gap-8 p-4\"</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    &#x3C;</span><span style=\"color:#85E89D\">h1</span><span style=\"color:#B392F0\"> class</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"text-2xl font-bold mb-4\"</span><span style=\"color:#E1E4E8\">>Skeletons&#x3C;/</span><span style=\"color:#85E89D\">h1</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    &#x3C;</span><span style=\"color:#85E89D\">a</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">        class</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"btn btn-primary mb-4\"</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">        href</span><span style=\"color:#E1E4E8\">={</span><span style=\"color:#B392F0\">resolve</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">\"/(app)/models/skeletons/[skeleton_id]\"</span><span style=\"color:#E1E4E8\">, { skeleton_id: </span><span style=\"color:#9ECBFF\">\"new\"</span><span style=\"color:#E1E4E8\"> })}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    ></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        Create New Skeleton</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    &#x3C;/</span><span style=\"color:#85E89D\">a</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    &#x3C;</span><span style=\"color:#85E89D\">div</span><span style=\"color:#B392F0\"> class</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"overflow-x-auto\"</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        &#x3C;</span><span style=\"color:#85E89D\">table</span><span style=\"color:#B392F0\"> class</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"table\"</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            &#x3C;</span><span style=\"color:#85E89D\">thead</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                &#x3C;</span><span style=\"color:#85E89D\">tr</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                    &#x3C;</span><span style=\"color:#85E89D\">th</span><span style=\"color:#B392F0\"> role</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"columnheader\"</span><span style=\"color:#E1E4E8\">>Name&#x3C;/</span><span style=\"color:#85E89D\">th</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                    &#x3C;</span><span style=\"color:#85E89D\">th</span><span style=\"color:#B392F0\"> role</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"columnheader\"</span><span style=\"color:#E1E4E8\">>Age&#x3C;/</span><span style=\"color:#85E89D\">th</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                    &#x3C;</span><span style=\"color:#85E89D\">th</span><span style=\"color:#B392F0\"> role</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"columnheader\"</span><span style=\"color:#E1E4E8\">>Death&#x3C;/</span><span style=\"color:#85E89D\">th</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                    &#x3C;</span><span style=\"color:#85E89D\">th</span><span style=\"color:#B392F0\"> role</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"columnheader\"</span><span style=\"color:#E1E4E8\">>Zombie&#x3C;/</span><span style=\"color:#85E89D\">th</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                    &#x3C;</span><span style=\"color:#85E89D\">th</span><span style=\"color:#B392F0\"> role</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"columnheader\"</span><span style=\"color:#E1E4E8\">>Created&#x3C;/</span><span style=\"color:#85E89D\">th</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                    &#x3C;</span><span style=\"color:#85E89D\">th</span><span style=\"color:#B392F0\"> role</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"columnheader\"</span><span style=\"color:#E1E4E8\">>Updated&#x3C;/</span><span style=\"color:#85E89D\">th</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                    &#x3C;</span><span style=\"color:#85E89D\">th</span><span style=\"color:#B392F0\"> role</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"columnheader\"</span><span style=\"color:#E1E4E8\">>&#x3C;/</span><span style=\"color:#85E89D\">th</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                &#x3C;/</span><span style=\"color:#85E89D\">tr</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            &#x3C;/</span><span style=\"color:#85E89D\">thead</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            &#x3C;</span><span style=\"color:#85E89D\">tbody</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                {#</span><span style=\"color:#F97583\">each</span><span style=\"color:#E1E4E8\"> skeletons </span><span style=\"color:#F97583\">as</span><span style=\"color:#E1E4E8\"> skeleton, i (skeleton?.id </span><span style=\"color:#F97583\">??</span><span style=\"color:#E1E4E8\"> i)}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                    {#</span><span style=\"color:#F97583\">if</span><span style=\"color:#F97583\"> !</span><span style=\"color:#E1E4E8\">skeleton}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                        &#x3C;</span><span style=\"color:#85E89D\">tr</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                            &#x3C;</span><span style=\"color:#85E89D\">td</span><span style=\"color:#B392F0\"> colspan</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"</span><span style=\"color:#79B8FF\">7</span><span style=\"color:#9ECBFF\">\"</span><span style=\"color:#B392F0\"> class</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"text-center\"</span><span style=\"color:#E1E4E8\">> Loading... &#x3C;/</span><span style=\"color:#85E89D\">td</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                        &#x3C;/</span><span style=\"color:#85E89D\">tr</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                    {:</span><span style=\"color:#F97583\">else</span><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                        &#x3C;</span><span style=\"color:#85E89D\">tr</span><span style=\"color:#B392F0\"> data-testid</span><span style=\"color:#E1E4E8\">={skeleton.id}></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                            &#x3C;</span><span style=\"color:#85E89D\">td</span><span style=\"color:#E1E4E8\">>{skeleton.name}&#x3C;/</span><span style=\"color:#85E89D\">td</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                            &#x3C;</span><span style=\"color:#85E89D\">td</span><span style=\"color:#E1E4E8\">>{skeleton.age}&#x3C;/</span><span style=\"color:#85E89D\">td</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                            &#x3C;</span><span style=\"color:#85E89D\">td</span><span style=\"color:#E1E4E8\">>{</span><span style=\"color:#F97583\">new</span><span style=\"color:#B392F0\"> Date</span><span style=\"color:#E1E4E8\">(skeleton.death).</span><span style=\"color:#B392F0\">toLocaleDateString</span><span style=\"color:#E1E4E8\">()}&#x3C;/</span><span style=\"color:#85E89D\">td</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                            &#x3C;</span><span style=\"color:#85E89D\">td</span><span style=\"color:#E1E4E8\">>{skeleton.zombie </span><span style=\"color:#F97583\">?</span><span style=\"color:#9ECBFF\"> \"Yes\"</span><span style=\"color:#F97583\"> :</span><span style=\"color:#9ECBFF\"> \"No\"</span><span style=\"color:#E1E4E8\">}&#x3C;/</span><span style=\"color:#85E89D\">td</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                            &#x3C;</span><span style=\"color:#85E89D\">td</span><span style=\"color:#E1E4E8\">>{</span><span style=\"color:#F97583\">new</span><span style=\"color:#B392F0\"> Date</span><span style=\"color:#E1E4E8\">(skeleton.created).</span><span style=\"color:#B392F0\">toLocaleDateString</span><span style=\"color:#E1E4E8\">()}&#x3C;/</span><span style=\"color:#85E89D\">td</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                            &#x3C;</span><span style=\"color:#85E89D\">td</span><span style=\"color:#E1E4E8\">>{</span><span style=\"color:#F97583\">new</span><span style=\"color:#B392F0\"> Date</span><span style=\"color:#E1E4E8\">(skeleton.updated).</span><span style=\"color:#B392F0\">toLocaleDateString</span><span style=\"color:#E1E4E8\">()}&#x3C;/</span><span style=\"color:#85E89D\">td</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                            &#x3C;</span><span style=\"color:#85E89D\">td</span><span style=\"color:#B392F0\"> class</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"text-right\"</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                                &#x3C;</span><span style=\"color:#85E89D\">a</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">                                    href</span><span style=\"color:#E1E4E8\">={</span><span style=\"color:#B392F0\">resolve</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">\"/(app)/models/skeletons/[skeleton_id]\"</span><span style=\"color:#E1E4E8\">, {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                                        skeleton_id: skeleton.id</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                                    })}</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">                                    class</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"btn btn-ghost btn-sm\"</span><span style=\"color:#E1E4E8\">>Edit&#x3C;/</span><span style=\"color:#85E89D\">a</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                                ></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                                &#x3C;</span><span style=\"color:#85E89D\">button</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">                                    class</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"btn btn-ghost btn-sm text-error\"</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">                                    command</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"show-modal\"</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">                                    commandfor</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"delete-dialog\"</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">                                    onclick</span><span style=\"color:#E1E4E8\">={() </span><span style=\"color:#F97583\">=></span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                                        item_id </span><span style=\"color:#F97583\">=</span><span style=\"color:#E1E4E8\"> skeleton.id;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                                    }}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                                ></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                                    Delete</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                                &#x3C;/</span><span style=\"color:#85E89D\">button</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                            &#x3C;/</span><span style=\"color:#85E89D\">td</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                        &#x3C;/</span><span style=\"color:#85E89D\">tr</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                    {/</span><span style=\"color:#F97583\">if</span><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                {/</span><span style=\"color:#F97583\">each</span><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            &#x3C;/</span><span style=\"color:#85E89D\">tbody</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        &#x3C;/</span><span style=\"color:#85E89D\">table</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    &#x3C;/</span><span style=\"color:#85E89D\">div</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">&#x3C;/</span><span style=\"color:#85E89D\">div</span><span style=\"color:#E1E4E8\">></span></span>\n<span class=\"line\"></span></code></pre>"
  },
  {
    "id": "model_e2e",
    "title": "Generated E2E Tests",
    "path": "e2e/skeletons.test.ts",
    "lang": "typescript",
    "description": "Full-stack Playwright tests generated for every model to ensure reliability.",
    "html": "<pre class=\"shiki github-dark\" style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#F97583\">import</span><span style=\"color:#E1E4E8\"> { expect, test, </span><span style=\"color:#F97583\">type</span><span style=\"color:#E1E4E8\"> Locator, </span><span style=\"color:#F97583\">type</span><span style=\"color:#E1E4E8\"> Page } </span><span style=\"color:#F97583\">from</span><span style=\"color:#9ECBFF\"> '@playwright/test'</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">import</span><span style=\"color:#E1E4E8\"> { loginAs, generateTestEmail, cleanupUser } </span><span style=\"color:#F97583\">from</span><span style=\"color:#9ECBFF\"> './lib'</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">type</span><span style=\"color:#B392F0\"> FieldType</span><span style=\"color:#F97583\"> =</span><span style=\"color:#9ECBFF\"> 'string'</span><span style=\"color:#F97583\"> |</span><span style=\"color:#9ECBFF\"> 'number'</span><span style=\"color:#F97583\"> |</span><span style=\"color:#9ECBFF\"> 'date'</span><span style=\"color:#F97583\"> |</span><span style=\"color:#9ECBFF\"> 'boolean'</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">type</span><span style=\"color:#B392F0\"> FieldDefinition</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">    name</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> string</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">    label</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> string</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">    type</span><span style=\"color:#F97583\">:</span><span style=\"color:#B392F0\"> FieldType</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">    createValue</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> string</span><span style=\"color:#F97583\"> |</span><span style=\"color:#79B8FF\"> boolean</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">    validationMessage</span><span style=\"color:#F97583\">?:</span><span style=\"color:#79B8FF\"> string</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">    useTimestamp</span><span style=\"color:#F97583\">?:</span><span style=\"color:#79B8FF\"> boolean</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">};</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">type</span><span style=\"color:#B392F0\"> ModelConfig</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">    name</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> string</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">    plural</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> string</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">    route</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> string</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">    createRoute</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> string</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">    createLinkLabel</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> string</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">    saveButtonLabel</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> string</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">    deleteButtonLabel</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> string</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">    listHeaders</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> string</span><span style=\"color:#E1E4E8\">[];</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">    toastMessages</span><span style=\"color:#F97583\">:</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">        updateSuccess</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> string</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    };</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">    fields</span><span style=\"color:#F97583\">:</span><span style=\"color:#B392F0\"> FieldDefinition</span><span style=\"color:#E1E4E8\">[];</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">    createAssertField</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> string</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">    editScenario</span><span style=\"color:#F97583\">:</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">        fieldName</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> string</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">        newValue</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> string</span><span style=\"color:#F97583\"> |</span><span style=\"color:#79B8FF\"> boolean</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    };</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">};</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">const</span><span style=\"color:#79B8FF\"> modelConfig</span><span style=\"color:#F97583\">:</span><span style=\"color:#B392F0\"> ModelConfig</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    name: </span><span style=\"color:#9ECBFF\">'Skeleton'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    plural: </span><span style=\"color:#9ECBFF\">'Skeletons'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    route: </span><span style=\"color:#9ECBFF\">'/models/skeletons'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    createRoute: </span><span style=\"color:#9ECBFF\">'/models/skeletons/new'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    createLinkLabel: </span><span style=\"color:#9ECBFF\">'Create New Skeleton'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    saveButtonLabel: </span><span style=\"color:#9ECBFF\">'Save'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    deleteButtonLabel: </span><span style=\"color:#9ECBFF\">'Delete'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    listHeaders: [</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">        'Name'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">        'Age'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">        'Death'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">        'Zombie'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">        'Created'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">        'Updated'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    ],</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    toastMessages: {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        updateSuccess: </span><span style=\"color:#9ECBFF\">'Skeleton updated successfully.'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    },</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    fields: [</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            name: </span><span style=\"color:#9ECBFF\">'name'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            label: </span><span style=\"color:#9ECBFF\">'Name'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            type: </span><span style=\"color:#9ECBFF\">'string'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            createValue: </span><span style=\"color:#9ECBFF\">'Test Skeleton'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            validationMessage: </span><span style=\"color:#9ECBFF\">'Enter at least 3 characters'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            useTimestamp: </span><span style=\"color:#79B8FF\">true</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        },</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            name: </span><span style=\"color:#9ECBFF\">'age'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            label: </span><span style=\"color:#9ECBFF\">'Age'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            type: </span><span style=\"color:#9ECBFF\">'number'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            createValue: </span><span style=\"color:#9ECBFF\">'100'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            validationMessage: </span><span style=\"color:#9ECBFF\">'Enter a positive number'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        },</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            name: </span><span style=\"color:#9ECBFF\">'death'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            label: </span><span style=\"color:#9ECBFF\">'Death'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            type: </span><span style=\"color:#9ECBFF\">'date'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            createValue: </span><span style=\"color:#9ECBFF\">'2025-01-01'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            validationMessage: </span><span style=\"color:#9ECBFF\">'Select a valid date'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        },</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            name: </span><span style=\"color:#9ECBFF\">'zombie'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            label: </span><span style=\"color:#9ECBFF\">'Zombie'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            type: </span><span style=\"color:#9ECBFF\">'boolean'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            createValue: </span><span style=\"color:#79B8FF\">true</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        },</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    ],</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    createAssertField: </span><span style=\"color:#9ECBFF\">'name'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    editScenario: {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        fieldName: </span><span style=\"color:#9ECBFF\">'name'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        newValue: </span><span style=\"color:#9ECBFF\">'Edited Skeleton'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    },</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">};</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">type</span><span style=\"color:#B392F0\"> FieldValues</span><span style=\"color:#F97583\"> =</span><span style=\"color:#B392F0\"> Record</span><span style=\"color:#E1E4E8\">&#x3C;</span><span style=\"color:#79B8FF\">string</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#79B8FF\">string</span><span style=\"color:#F97583\"> |</span><span style=\"color:#79B8FF\"> boolean</span><span style=\"color:#E1E4E8\">>;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">const</span><span style=\"color:#79B8FF\"> testEmail</span><span style=\"color:#F97583\"> =</span><span style=\"color:#B392F0\"> generateTestEmail</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'e2e-skeletons'</span><span style=\"color:#E1E4E8\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">function</span><span style=\"color:#B392F0\"> getFieldControl</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#FFAB70\">page</span><span style=\"color:#F97583\">:</span><span style=\"color:#B392F0\"> Page</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">field</span><span style=\"color:#F97583\">:</span><span style=\"color:#B392F0\"> FieldDefinition</span><span style=\"color:#E1E4E8\">)</span><span style=\"color:#F97583\">:</span><span style=\"color:#B392F0\"> Locator</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    return</span><span style=\"color:#E1E4E8\"> page.</span><span style=\"color:#B392F0\">getByLabel</span><span style=\"color:#E1E4E8\">(field.label);</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">async</span><span style=\"color:#F97583\"> function</span><span style=\"color:#B392F0\"> setControlValue</span><span style=\"color:#E1E4E8\">(</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">    control</span><span style=\"color:#F97583\">:</span><span style=\"color:#B392F0\"> Locator</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">    field</span><span style=\"color:#F97583\">:</span><span style=\"color:#B392F0\"> FieldDefinition</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">    value</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> string</span><span style=\"color:#F97583\"> |</span><span style=\"color:#79B8FF\"> boolean</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">)</span><span style=\"color:#F97583\">:</span><span style=\"color:#B392F0\"> Promise</span><span style=\"color:#E1E4E8\">&#x3C;</span><span style=\"color:#79B8FF\">void</span><span style=\"color:#E1E4E8\">> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    if</span><span style=\"color:#E1E4E8\"> (field.type </span><span style=\"color:#F97583\">===</span><span style=\"color:#9ECBFF\"> 'boolean'</span><span style=\"color:#E1E4E8\">) {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        if</span><span style=\"color:#E1E4E8\"> (value) {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">            await</span><span style=\"color:#E1E4E8\"> control.</span><span style=\"color:#B392F0\">check</span><span style=\"color:#E1E4E8\">();</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        } </span><span style=\"color:#F97583\">else</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">            await</span><span style=\"color:#E1E4E8\"> control.</span><span style=\"color:#B392F0\">uncheck</span><span style=\"color:#E1E4E8\">();</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        }</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        return</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">    await</span><span style=\"color:#E1E4E8\"> control.</span><span style=\"color:#B392F0\">fill</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#B392F0\">String</span><span style=\"color:#E1E4E8\">(value));</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">async</span><span style=\"color:#F97583\"> function</span><span style=\"color:#B392F0\"> expectControlValue</span><span style=\"color:#E1E4E8\">(</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">    control</span><span style=\"color:#F97583\">:</span><span style=\"color:#B392F0\"> Locator</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">    field</span><span style=\"color:#F97583\">:</span><span style=\"color:#B392F0\"> FieldDefinition</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#FFAB70\">    value</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> string</span><span style=\"color:#F97583\"> |</span><span style=\"color:#79B8FF\"> boolean</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">)</span><span style=\"color:#F97583\">:</span><span style=\"color:#B392F0\"> Promise</span><span style=\"color:#E1E4E8\">&#x3C;</span><span style=\"color:#79B8FF\">void</span><span style=\"color:#E1E4E8\">> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    if</span><span style=\"color:#E1E4E8\"> (field.type </span><span style=\"color:#F97583\">===</span><span style=\"color:#9ECBFF\"> 'boolean'</span><span style=\"color:#E1E4E8\">) {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        if</span><span style=\"color:#E1E4E8\"> (value) {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">            await</span><span style=\"color:#B392F0\"> expect</span><span style=\"color:#E1E4E8\">(control).</span><span style=\"color:#B392F0\">toBeChecked</span><span style=\"color:#E1E4E8\">();</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        } </span><span style=\"color:#F97583\">else</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">            await</span><span style=\"color:#B392F0\"> expect</span><span style=\"color:#E1E4E8\">(control).not.</span><span style=\"color:#B392F0\">toBeChecked</span><span style=\"color:#E1E4E8\">();</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        }</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        return</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">    await</span><span style=\"color:#B392F0\"> expect</span><span style=\"color:#E1E4E8\">(control).</span><span style=\"color:#B392F0\">toHaveValue</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#B392F0\">String</span><span style=\"color:#E1E4E8\">(value));</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">function</span><span style=\"color:#B392F0\"> formatListValue</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#FFAB70\">field</span><span style=\"color:#F97583\">:</span><span style=\"color:#B392F0\"> FieldDefinition</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">value</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> string</span><span style=\"color:#F97583\"> |</span><span style=\"color:#79B8FF\"> boolean</span><span style=\"color:#E1E4E8\">)</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> string</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    if</span><span style=\"color:#E1E4E8\"> (field.type </span><span style=\"color:#F97583\">===</span><span style=\"color:#9ECBFF\"> 'boolean'</span><span style=\"color:#E1E4E8\">) {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        return</span><span style=\"color:#E1E4E8\"> value </span><span style=\"color:#F97583\">?</span><span style=\"color:#9ECBFF\"> 'Yes'</span><span style=\"color:#F97583\"> :</span><span style=\"color:#9ECBFF\"> 'No'</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">    if</span><span style=\"color:#E1E4E8\"> (field.type </span><span style=\"color:#F97583\">===</span><span style=\"color:#9ECBFF\"> 'date'</span><span style=\"color:#E1E4E8\">) {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        return</span><span style=\"color:#F97583\"> new</span><span style=\"color:#B392F0\"> Date</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#B392F0\">String</span><span style=\"color:#E1E4E8\">(value)).</span><span style=\"color:#B392F0\">toLocaleDateString</span><span style=\"color:#E1E4E8\">();</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">    return</span><span style=\"color:#B392F0\"> String</span><span style=\"color:#E1E4E8\">(value);</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">function</span><span style=\"color:#B392F0\"> buildCreateValues</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#FFAB70\">fields</span><span style=\"color:#F97583\">:</span><span style=\"color:#B392F0\"> FieldDefinition</span><span style=\"color:#E1E4E8\">[])</span><span style=\"color:#F97583\">:</span><span style=\"color:#B392F0\"> FieldValues</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    const</span><span style=\"color:#79B8FF\"> values</span><span style=\"color:#F97583\">:</span><span style=\"color:#B392F0\"> FieldValues</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> {};</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    const</span><span style=\"color:#79B8FF\"> timestamp</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> Date.</span><span style=\"color:#B392F0\">now</span><span style=\"color:#E1E4E8\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">    for</span><span style=\"color:#E1E4E8\"> (</span><span style=\"color:#F97583\">const</span><span style=\"color:#79B8FF\"> field</span><span style=\"color:#F97583\"> of</span><span style=\"color:#E1E4E8\"> fields) {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        const</span><span style=\"color:#79B8FF\"> rawValue</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> field.createValue;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        if</span><span style=\"color:#E1E4E8\"> (field.useTimestamp </span><span style=\"color:#F97583\">&#x26;&#x26;</span><span style=\"color:#F97583\"> typeof</span><span style=\"color:#E1E4E8\"> rawValue </span><span style=\"color:#F97583\">===</span><span style=\"color:#9ECBFF\"> 'string'</span><span style=\"color:#E1E4E8\">) {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            values[field.name] </span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\"> `${</span><span style=\"color:#E1E4E8\">rawValue</span><span style=\"color:#9ECBFF\">} ${</span><span style=\"color:#E1E4E8\">timestamp</span><span style=\"color:#9ECBFF\">}`</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        } </span><span style=\"color:#F97583\">else</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            values[field.name] </span><span style=\"color:#F97583\">=</span><span style=\"color:#E1E4E8\"> rawValue;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        }</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">    return</span><span style=\"color:#E1E4E8\"> values;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">async</span><span style=\"color:#F97583\"> function</span><span style=\"color:#B392F0\"> fillForm</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#FFAB70\">page</span><span style=\"color:#F97583\">:</span><span style=\"color:#B392F0\"> Page</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">values</span><span style=\"color:#F97583\">:</span><span style=\"color:#B392F0\"> FieldValues</span><span style=\"color:#E1E4E8\">)</span><span style=\"color:#F97583\">:</span><span style=\"color:#B392F0\"> Promise</span><span style=\"color:#E1E4E8\">&#x3C;</span><span style=\"color:#79B8FF\">void</span><span style=\"color:#E1E4E8\">> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    for</span><span style=\"color:#E1E4E8\"> (</span><span style=\"color:#F97583\">const</span><span style=\"color:#79B8FF\"> field</span><span style=\"color:#F97583\"> of</span><span style=\"color:#E1E4E8\"> modelConfig.fields) {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        const</span><span style=\"color:#79B8FF\"> control</span><span style=\"color:#F97583\"> =</span><span style=\"color:#B392F0\"> getFieldControl</span><span style=\"color:#E1E4E8\">(page, field);</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        await</span><span style=\"color:#B392F0\"> setControlValue</span><span style=\"color:#E1E4E8\">(control, field, values[field.name]);</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    }</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">async</span><span style=\"color:#F97583\"> function</span><span style=\"color:#B392F0\"> createEntry</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#FFAB70\">page</span><span style=\"color:#F97583\">:</span><span style=\"color:#B392F0\"> Page</span><span style=\"color:#E1E4E8\">)</span><span style=\"color:#F97583\">:</span><span style=\"color:#B392F0\"> Promise</span><span style=\"color:#E1E4E8\">&#x3C;</span><span style=\"color:#B392F0\">FieldValues</span><span style=\"color:#E1E4E8\">> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    await</span><span style=\"color:#E1E4E8\"> page.</span><span style=\"color:#B392F0\">getByRole</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'link'</span><span style=\"color:#E1E4E8\">, { name: modelConfig.createLinkLabel }).</span><span style=\"color:#B392F0\">click</span><span style=\"color:#E1E4E8\">();</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    await</span><span style=\"color:#B392F0\"> expect</span><span style=\"color:#E1E4E8\">(page).</span><span style=\"color:#B392F0\">toHaveURL</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#F97583\">new</span><span style=\"color:#B392F0\"> RegExp</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">`.*${</span><span style=\"color:#E1E4E8\">modelConfig</span><span style=\"color:#9ECBFF\">.</span><span style=\"color:#E1E4E8\">createRoute</span><span style=\"color:#9ECBFF\">}`</span><span style=\"color:#E1E4E8\">));</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">    const</span><span style=\"color:#79B8FF\"> createValues</span><span style=\"color:#F97583\"> =</span><span style=\"color:#B392F0\"> buildCreateValues</span><span style=\"color:#E1E4E8\">(modelConfig.fields);</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    await</span><span style=\"color:#B392F0\"> fillForm</span><span style=\"color:#E1E4E8\">(page, createValues);</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    await</span><span style=\"color:#E1E4E8\"> page.</span><span style=\"color:#B392F0\">getByRole</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'button'</span><span style=\"color:#E1E4E8\">, { name: modelConfig.saveButtonLabel }).</span><span style=\"color:#B392F0\">click</span><span style=\"color:#E1E4E8\">();</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    await</span><span style=\"color:#B392F0\"> expect</span><span style=\"color:#E1E4E8\">(page.</span><span style=\"color:#B392F0\">getByRole</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'heading'</span><span style=\"color:#E1E4E8\">, { name: modelConfig.plural })).</span><span style=\"color:#B392F0\">toBeVisible</span><span style=\"color:#E1E4E8\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">    return</span><span style=\"color:#E1E4E8\"> createValues;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">test.</span><span style=\"color:#B392F0\">describe</span><span style=\"color:#E1E4E8\">(modelConfig.plural, () </span><span style=\"color:#F97583\">=></span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    test.</span><span style=\"color:#B392F0\">afterAll</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#F97583\">async</span><span style=\"color:#E1E4E8\"> () </span><span style=\"color:#F97583\">=></span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        await</span><span style=\"color:#B392F0\"> cleanupUser</span><span style=\"color:#E1E4E8\">(testEmail);</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    test.</span><span style=\"color:#B392F0\">beforeEach</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#F97583\">async</span><span style=\"color:#E1E4E8\"> ({ </span><span style=\"color:#FFAB70\">page</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">context</span><span style=\"color:#E1E4E8\"> }) </span><span style=\"color:#F97583\">=></span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        await</span><span style=\"color:#B392F0\"> loginAs</span><span style=\"color:#E1E4E8\">(context, testEmail);</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        await</span><span style=\"color:#E1E4E8\"> page.</span><span style=\"color:#B392F0\">goto</span><span style=\"color:#E1E4E8\">(modelConfig.route);</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#B392F0\">    test</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'should allow a user to list entries'</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#F97583\">async</span><span style=\"color:#E1E4E8\"> ({ </span><span style=\"color:#FFAB70\">page</span><span style=\"color:#E1E4E8\"> }) </span><span style=\"color:#F97583\">=></span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        await</span><span style=\"color:#B392F0\"> expect</span><span style=\"color:#E1E4E8\">(page.</span><span style=\"color:#B392F0\">getByRole</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'heading'</span><span style=\"color:#E1E4E8\">, { name: modelConfig.plural })).</span><span style=\"color:#B392F0\">toBeVisible</span><span style=\"color:#E1E4E8\">();</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        for</span><span style=\"color:#E1E4E8\"> (</span><span style=\"color:#F97583\">const</span><span style=\"color:#79B8FF\"> header</span><span style=\"color:#F97583\"> of</span><span style=\"color:#E1E4E8\"> modelConfig.listHeaders) {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">            await</span><span style=\"color:#B392F0\"> expect</span><span style=\"color:#E1E4E8\">(page.</span><span style=\"color:#B392F0\">getByRole</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'columnheader'</span><span style=\"color:#E1E4E8\">, { name: header })).</span><span style=\"color:#B392F0\">toBeVisible</span><span style=\"color:#E1E4E8\">();</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        }</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#B392F0\">    test</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'should allow a user to add an entry'</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#F97583\">async</span><span style=\"color:#E1E4E8\"> ({ </span><span style=\"color:#FFAB70\">page</span><span style=\"color:#E1E4E8\"> }) </span><span style=\"color:#F97583\">=></span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        const</span><span style=\"color:#79B8FF\"> createValues</span><span style=\"color:#F97583\"> =</span><span style=\"color:#F97583\"> await</span><span style=\"color:#B392F0\"> createEntry</span><span style=\"color:#E1E4E8\">(page);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">        const</span><span style=\"color:#79B8FF\"> assertField</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> modelConfig.fields.</span><span style=\"color:#B392F0\">find</span><span style=\"color:#E1E4E8\">(</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            (</span><span style=\"color:#FFAB70\">field</span><span style=\"color:#E1E4E8\">) </span><span style=\"color:#F97583\">=></span><span style=\"color:#E1E4E8\"> field.name </span><span style=\"color:#F97583\">===</span><span style=\"color:#E1E4E8\"> modelConfig.createAssertField,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        );</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        if</span><span style=\"color:#E1E4E8\"> (assertField) {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">            const</span><span style=\"color:#79B8FF\"> expected</span><span style=\"color:#F97583\"> =</span><span style=\"color:#B392F0\"> formatListValue</span><span style=\"color:#E1E4E8\">(assertField, createValues[assertField.name]);</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">            // Use .first() to handle cases where multiple cells have the same value (e.g., multiple bool columns with \"Yes\")</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">            await</span><span style=\"color:#B392F0\"> expect</span><span style=\"color:#E1E4E8\">(</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                page.</span><span style=\"color:#B392F0\">getByRole</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'cell'</span><span style=\"color:#E1E4E8\">, { name: expected, exact: </span><span style=\"color:#79B8FF\">true</span><span style=\"color:#E1E4E8\"> }).</span><span style=\"color:#B392F0\">first</span><span style=\"color:#E1E4E8\">(),</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            ).</span><span style=\"color:#B392F0\">toBeVisible</span><span style=\"color:#E1E4E8\">();</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        }</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#B392F0\">    test</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'should allow a user to edit an entry'</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#F97583\">async</span><span style=\"color:#E1E4E8\"> ({ </span><span style=\"color:#FFAB70\">page</span><span style=\"color:#E1E4E8\"> }) </span><span style=\"color:#F97583\">=></span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        await</span><span style=\"color:#B392F0\"> createEntry</span><span style=\"color:#E1E4E8\">(page);</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        await</span><span style=\"color:#E1E4E8\"> page.</span><span style=\"color:#B392F0\">getByRole</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'link'</span><span style=\"color:#E1E4E8\">, { name: </span><span style=\"color:#9ECBFF\">'Edit'</span><span style=\"color:#E1E4E8\"> }).</span><span style=\"color:#B392F0\">first</span><span style=\"color:#E1E4E8\">().</span><span style=\"color:#B392F0\">click</span><span style=\"color:#E1E4E8\">();</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        await</span><span style=\"color:#B392F0\"> expect</span><span style=\"color:#E1E4E8\">(page).</span><span style=\"color:#B392F0\">toHaveURL</span><span style=\"color:#E1E4E8\">(</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">            new</span><span style=\"color:#B392F0\"> RegExp</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">`.*${</span><span style=\"color:#E1E4E8\">modelConfig</span><span style=\"color:#9ECBFF\">.</span><span style=\"color:#E1E4E8\">route</span><span style=\"color:#9ECBFF\">}/[a-zA-Z0-9-]+`</span><span style=\"color:#E1E4E8\">),</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        );</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        const</span><span style=\"color:#79B8FF\"> url</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> page.</span><span style=\"color:#B392F0\">url</span><span style=\"color:#E1E4E8\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">        const</span><span style=\"color:#79B8FF\"> editField</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> modelConfig.fields.</span><span style=\"color:#B392F0\">find</span><span style=\"color:#E1E4E8\">(</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            (</span><span style=\"color:#FFAB70\">field</span><span style=\"color:#E1E4E8\">) </span><span style=\"color:#F97583\">=></span><span style=\"color:#E1E4E8\"> field.name </span><span style=\"color:#F97583\">===</span><span style=\"color:#E1E4E8\"> modelConfig.editScenario.fieldName,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        );</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        if</span><span style=\"color:#E1E4E8\"> (</span><span style=\"color:#F97583\">!</span><span style=\"color:#E1E4E8\">editField) {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">            throw</span><span style=\"color:#F97583\"> new</span><span style=\"color:#B392F0\"> Error</span><span style=\"color:#E1E4E8\">(</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">                `Configured edit field \"${</span><span style=\"color:#E1E4E8\">modelConfig</span><span style=\"color:#9ECBFF\">.</span><span style=\"color:#E1E4E8\">editScenario</span><span style=\"color:#9ECBFF\">.</span><span style=\"color:#E1E4E8\">fieldName</span><span style=\"color:#9ECBFF\">}\" was not found`</span><span style=\"color:#E1E4E8\">,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            );</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">        const</span><span style=\"color:#79B8FF\"> control</span><span style=\"color:#F97583\"> =</span><span style=\"color:#B392F0\"> getFieldControl</span><span style=\"color:#E1E4E8\">(page, editField);</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        await</span><span style=\"color:#B392F0\"> setControlValue</span><span style=\"color:#E1E4E8\">(control, editField, modelConfig.editScenario.newValue);</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        await</span><span style=\"color:#E1E4E8\"> page.</span><span style=\"color:#B392F0\">getByRole</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'button'</span><span style=\"color:#E1E4E8\">, { name: modelConfig.saveButtonLabel }).</span><span style=\"color:#B392F0\">click</span><span style=\"color:#E1E4E8\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">        await</span><span style=\"color:#B392F0\"> expect</span><span style=\"color:#E1E4E8\">(page).</span><span style=\"color:#B392F0\">toHaveURL</span><span style=\"color:#E1E4E8\">(url);</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        await</span><span style=\"color:#B392F0\"> expect</span><span style=\"color:#E1E4E8\">(</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            page.</span><span style=\"color:#B392F0\">getByText</span><span style=\"color:#E1E4E8\">(modelConfig.toastMessages.updateSuccess),</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        ).</span><span style=\"color:#B392F0\">toBeVisible</span><span style=\"color:#E1E4E8\">();</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        await</span><span style=\"color:#B392F0\"> expectControlValue</span><span style=\"color:#E1E4E8\">(control, editField, modelConfig.editScenario.newValue);</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#B392F0\">    test</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'should show validation hints on empty form'</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#F97583\">async</span><span style=\"color:#E1E4E8\"> ({ </span><span style=\"color:#FFAB70\">page</span><span style=\"color:#E1E4E8\"> }) </span><span style=\"color:#F97583\">=></span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        await</span><span style=\"color:#E1E4E8\"> page.</span><span style=\"color:#B392F0\">getByRole</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'link'</span><span style=\"color:#E1E4E8\">, { name: modelConfig.createLinkLabel }).</span><span style=\"color:#B392F0\">click</span><span style=\"color:#E1E4E8\">();</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        await</span><span style=\"color:#B392F0\"> expect</span><span style=\"color:#E1E4E8\">(page).</span><span style=\"color:#B392F0\">toHaveURL</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#F97583\">new</span><span style=\"color:#B392F0\"> RegExp</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">`.*${</span><span style=\"color:#E1E4E8\">modelConfig</span><span style=\"color:#9ECBFF\">.</span><span style=\"color:#E1E4E8\">createRoute</span><span style=\"color:#9ECBFF\">}`</span><span style=\"color:#E1E4E8\">));</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">        await</span><span style=\"color:#E1E4E8\"> page.</span><span style=\"color:#B392F0\">getByRole</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'button'</span><span style=\"color:#E1E4E8\">, { name: modelConfig.saveButtonLabel }).</span><span style=\"color:#B392F0\">click</span><span style=\"color:#E1E4E8\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">        const</span><span style=\"color:#79B8FF\"> validationTotals</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> modelConfig.fields.</span><span style=\"color:#B392F0\">reduce</span><span style=\"color:#E1E4E8\">&#x3C;</span><span style=\"color:#B392F0\">Record</span><span style=\"color:#E1E4E8\">&#x3C;</span><span style=\"color:#79B8FF\">string</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#79B8FF\">number</span><span style=\"color:#E1E4E8\">>>(</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            (</span><span style=\"color:#FFAB70\">counts</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">field</span><span style=\"color:#E1E4E8\">) </span><span style=\"color:#F97583\">=></span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">                if</span><span style=\"color:#E1E4E8\"> (</span><span style=\"color:#F97583\">!</span><span style=\"color:#E1E4E8\">field.validationMessage) {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">                    return</span><span style=\"color:#E1E4E8\"> counts;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                }</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                counts[field.validationMessage] </span><span style=\"color:#F97583\">=</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">                    (counts[field.validationMessage] </span><span style=\"color:#F97583\">??</span><span style=\"color:#79B8FF\"> 0</span><span style=\"color:#E1E4E8\">) </span><span style=\"color:#F97583\">+</span><span style=\"color:#79B8FF\"> 1</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">                return</span><span style=\"color:#E1E4E8\"> counts;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            },</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">            {},</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        );</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">        for</span><span style=\"color:#E1E4E8\"> (</span><span style=\"color:#F97583\">const</span><span style=\"color:#E1E4E8\"> [</span><span style=\"color:#79B8FF\">message</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#79B8FF\">count</span><span style=\"color:#E1E4E8\">] </span><span style=\"color:#F97583\">of</span><span style=\"color:#E1E4E8\"> Object.</span><span style=\"color:#B392F0\">entries</span><span style=\"color:#E1E4E8\">(validationTotals)) {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">            await</span><span style=\"color:#B392F0\"> expect</span><span style=\"color:#E1E4E8\">(page.</span><span style=\"color:#B392F0\">getByText</span><span style=\"color:#E1E4E8\">(message)).</span><span style=\"color:#B392F0\">toHaveCount</span><span style=\"color:#E1E4E8\">(count);</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        }</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#B392F0\">    test</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'should allow a user to remove an entry'</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#F97583\">async</span><span style=\"color:#E1E4E8\"> ({ </span><span style=\"color:#FFAB70\">page</span><span style=\"color:#E1E4E8\"> }) </span><span style=\"color:#F97583\">=></span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        await</span><span style=\"color:#B392F0\"> createEntry</span><span style=\"color:#E1E4E8\">(page);</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        page.</span><span style=\"color:#B392F0\">on</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'dialog'</span><span style=\"color:#E1E4E8\">, (</span><span style=\"color:#FFAB70\">dialog</span><span style=\"color:#E1E4E8\">) </span><span style=\"color:#F97583\">=></span><span style=\"color:#E1E4E8\"> dialog.</span><span style=\"color:#B392F0\">accept</span><span style=\"color:#E1E4E8\">());</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        await</span><span style=\"color:#E1E4E8\"> page.</span><span style=\"color:#B392F0\">getByRole</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'button'</span><span style=\"color:#E1E4E8\">, { name: modelConfig.deleteButtonLabel }).</span><span style=\"color:#B392F0\">first</span><span style=\"color:#E1E4E8\">().</span><span style=\"color:#B392F0\">click</span><span style=\"color:#E1E4E8\">();</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        await</span><span style=\"color:#B392F0\"> expect</span><span style=\"color:#E1E4E8\">(page.</span><span style=\"color:#B392F0\">getByRole</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'heading'</span><span style=\"color:#E1E4E8\">, { name: modelConfig.plural })).</span><span style=\"color:#B392F0\">toBeVisible</span><span style=\"color:#E1E4E8\">();</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    });</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">});</span></span>\n<span class=\"line\"></span></code></pre>"
  },
  {
    "id": "otel",
    "title": "OpenTelemetry Setup",
    "path": "app/pkg/otel/otel.go",
    "lang": "go",
    "description": "Production-ready observability configuration for Traces, Metrics, and Logs.",
    "html": "<pre class=\"shiki github-dark\" style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#F97583\">package</span><span style=\"color:#B392F0\"> otel</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">import</span><span style=\"color:#E1E4E8\"> (</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">context</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">errors</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">time</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">go.opentelemetry.io/otel</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">go.opentelemetry.io/otel/attribute</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">go.opentelemetry.io/otel/codes</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">go.opentelemetry.io/otel/exporters/otlp/otlplog/otlploggrpc</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">go.opentelemetry.io/otel/exporters/otlp/otlpmetric/otlpmetricgrpc</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">go.opentelemetry.io/otel/exporters/otlp/otlptrace/otlptracegrpc</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">go.opentelemetry.io/otel/log/global</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">go.opentelemetry.io/otel/propagation</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">go.opentelemetry.io/otel/sdk/log</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">go.opentelemetry.io/otel/sdk/metric</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">go.opentelemetry.io/otel/sdk/resource</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">\t\"</span><span style=\"color:#B392F0\">go.opentelemetry.io/otel/sdk/trace</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tsemconv </span><span style=\"color:#9ECBFF\">\"</span><span style=\"color:#B392F0\">go.opentelemetry.io/otel/semconv/v1.26.0</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tspan </span><span style=\"color:#9ECBFF\">\"</span><span style=\"color:#B392F0\">go.opentelemetry.io/otel/trace</span><span style=\"color:#9ECBFF\">\"</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\">// StartSpan starts a new span and returns a cleanup function that handles</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">// error recording and status setting. Use with named return values:</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">//</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">//\tfunc Foo(ctx context.Context) (result T, err error) {</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">//\t    ctx, span, done := ot.StartSpan(ctx, \"operation.name\")</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">//\t    defer func() { done(err) }()</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">//\t    // ... your logic</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">//\t}</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">func</span><span style=\"color:#B392F0\"> StartSpan</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#FFAB70\">ctx</span><span style=\"color:#B392F0\"> context</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Context</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">name</span><span style=\"color:#F97583\"> string</span><span style=\"color:#E1E4E8\">) (</span><span style=\"color:#B392F0\">context</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Context</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#B392F0\">span</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Span</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#F97583\">func</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#FFAB70\">err</span><span style=\"color:#F97583\"> error</span><span style=\"color:#E1E4E8\">)) {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tctx, s </span><span style=\"color:#F97583\">:=</span><span style=\"color:#E1E4E8\"> otel.</span><span style=\"color:#B392F0\">Tracer</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">\"gofast\"</span><span style=\"color:#E1E4E8\">).</span><span style=\"color:#B392F0\">Start</span><span style=\"color:#E1E4E8\">(ctx, name)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\treturn</span><span style=\"color:#E1E4E8\"> ctx, s, </span><span style=\"color:#F97583\">func</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#FFAB70\">err</span><span style=\"color:#F97583\"> error</span><span style=\"color:#E1E4E8\">) {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\tif</span><span style=\"color:#E1E4E8\"> err </span><span style=\"color:#F97583\">!=</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\t\ts.</span><span style=\"color:#B392F0\">RecordError</span><span style=\"color:#E1E4E8\">(err)</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\t\ts.</span><span style=\"color:#B392F0\">SetStatus</span><span style=\"color:#E1E4E8\">(codes.Error, err.</span><span style=\"color:#B392F0\">Error</span><span style=\"color:#E1E4E8\">())</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\t} </span><span style=\"color:#F97583\">else</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\t\ts.</span><span style=\"color:#B392F0\">SetStatus</span><span style=\"color:#E1E4E8\">(codes.Ok, </span><span style=\"color:#9ECBFF\">\"\"</span><span style=\"color:#E1E4E8\">)</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\t}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\ts.</span><span style=\"color:#B392F0\">End</span><span style=\"color:#E1E4E8\">()</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">func</span><span style=\"color:#B392F0\"> SetupOTelSDK</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#FFAB70\">ctx</span><span style=\"color:#B392F0\"> context</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Context</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">endpoint</span><span style=\"color:#F97583\"> string</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">serviceName</span><span style=\"color:#F97583\"> string</span><span style=\"color:#E1E4E8\">) (</span><span style=\"color:#F97583\">func</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#B392F0\">context</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Context</span><span style=\"color:#E1E4E8\">) </span><span style=\"color:#F97583\">error</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#F97583\">error</span><span style=\"color:#E1E4E8\">) {</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">\t// If no endpoint is configured, disable OTel completely</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tif</span><span style=\"color:#E1E4E8\"> endpoint </span><span style=\"color:#F97583\">==</span><span style=\"color:#9ECBFF\"> \"\"</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#F97583\"> func</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#B392F0\">context</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Context</span><span style=\"color:#E1E4E8\">) </span><span style=\"color:#F97583\">error</span><span style=\"color:#E1E4E8\"> { </span><span style=\"color:#F97583\">return</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> }, </span><span style=\"color:#79B8FF\">nil</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tvar</span><span style=\"color:#E1E4E8\"> shutdownFuncs []</span><span style=\"color:#F97583\">func</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#B392F0\">context</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Context</span><span style=\"color:#E1E4E8\">) </span><span style=\"color:#F97583\">error</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tvar</span><span style=\"color:#E1E4E8\"> err </span><span style=\"color:#F97583\">error</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tshutdown </span><span style=\"color:#F97583\">:=</span><span style=\"color:#F97583\"> func</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#FFAB70\">ctx</span><span style=\"color:#B392F0\"> context</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Context</span><span style=\"color:#E1E4E8\">) </span><span style=\"color:#F97583\">error</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\tvar</span><span style=\"color:#E1E4E8\"> err </span><span style=\"color:#F97583\">error</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\tfor</span><span style=\"color:#E1E4E8\"> _, fn </span><span style=\"color:#F97583\">:=</span><span style=\"color:#F97583\"> range</span><span style=\"color:#E1E4E8\"> shutdownFuncs {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\t\terr </span><span style=\"color:#F97583\">=</span><span style=\"color:#E1E4E8\"> errors.</span><span style=\"color:#B392F0\">Join</span><span style=\"color:#E1E4E8\">(err, </span><span style=\"color:#B392F0\">fn</span><span style=\"color:#E1E4E8\">(ctx))</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\t}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\tshutdownFuncs </span><span style=\"color:#F97583\">=</span><span style=\"color:#79B8FF\"> nil</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#E1E4E8\"> err</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\thandleErr </span><span style=\"color:#F97583\">:=</span><span style=\"color:#F97583\"> func</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#FFAB70\">inErr</span><span style=\"color:#F97583\"> error</span><span style=\"color:#E1E4E8\">) {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\terr </span><span style=\"color:#F97583\">=</span><span style=\"color:#E1E4E8\"> errors.</span><span style=\"color:#B392F0\">Join</span><span style=\"color:#E1E4E8\">(inErr, </span><span style=\"color:#B392F0\">shutdown</span><span style=\"color:#E1E4E8\">(ctx))</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\">\t// Set up propagator.</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tprop </span><span style=\"color:#F97583\">:=</span><span style=\"color:#B392F0\"> newPropagator</span><span style=\"color:#E1E4E8\">()</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\totel.</span><span style=\"color:#B392F0\">SetTextMapPropagator</span><span style=\"color:#E1E4E8\">(prop)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\">\t// Set up resource describing this service.</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tres, err </span><span style=\"color:#F97583\">:=</span><span style=\"color:#B392F0\"> newResource</span><span style=\"color:#E1E4E8\">(ctx, serviceName)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tif</span><span style=\"color:#E1E4E8\"> err </span><span style=\"color:#F97583\">!=</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">\t\thandleErr</span><span style=\"color:#E1E4E8\">(err)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#E1E4E8\"> shutdown, err</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\">\t// Set up trace provider.</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\ttracerProvider, err </span><span style=\"color:#F97583\">:=</span><span style=\"color:#B392F0\"> newTracerProvider</span><span style=\"color:#E1E4E8\">(ctx, res, endpoint)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tif</span><span style=\"color:#E1E4E8\"> err </span><span style=\"color:#F97583\">!=</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">\t\thandleErr</span><span style=\"color:#E1E4E8\">(err)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#E1E4E8\"> shutdown, err</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tshutdownFuncs </span><span style=\"color:#F97583\">=</span><span style=\"color:#B392F0\"> append</span><span style=\"color:#E1E4E8\">(shutdownFuncs, tracerProvider.Shutdown)</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\totel.</span><span style=\"color:#B392F0\">SetTracerProvider</span><span style=\"color:#E1E4E8\">(tracerProvider)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\">\t// Set up meter provider.</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tmeterProvider, err </span><span style=\"color:#F97583\">:=</span><span style=\"color:#B392F0\"> newMeterProvider</span><span style=\"color:#E1E4E8\">(ctx, res, endpoint)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tif</span><span style=\"color:#E1E4E8\"> err </span><span style=\"color:#F97583\">!=</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">\t\thandleErr</span><span style=\"color:#E1E4E8\">(err)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#E1E4E8\"> shutdown, err</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tshutdownFuncs </span><span style=\"color:#F97583\">=</span><span style=\"color:#B392F0\"> append</span><span style=\"color:#E1E4E8\">(shutdownFuncs, meterProvider.Shutdown)</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\totel.</span><span style=\"color:#B392F0\">SetMeterProvider</span><span style=\"color:#E1E4E8\">(meterProvider)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\">\t// Set up logger provider.</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tloggerProvider, err </span><span style=\"color:#F97583\">:=</span><span style=\"color:#B392F0\"> newLoggerProvider</span><span style=\"color:#E1E4E8\">(ctx, res, endpoint)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tif</span><span style=\"color:#E1E4E8\"> err </span><span style=\"color:#F97583\">!=</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">\t\thandleErr</span><span style=\"color:#E1E4E8\">(err)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#E1E4E8\"> shutdown, err</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tshutdownFuncs </span><span style=\"color:#F97583\">=</span><span style=\"color:#B392F0\"> append</span><span style=\"color:#E1E4E8\">(shutdownFuncs, loggerProvider.Shutdown)</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tglobal.</span><span style=\"color:#B392F0\">SetLoggerProvider</span><span style=\"color:#E1E4E8\">(loggerProvider)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">\treturn</span><span style=\"color:#E1E4E8\"> shutdown, err</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">func</span><span style=\"color:#B392F0\"> newPropagator</span><span style=\"color:#E1E4E8\">() </span><span style=\"color:#B392F0\">propagation</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">TextMapPropagator</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\treturn</span><span style=\"color:#E1E4E8\"> propagation.</span><span style=\"color:#B392F0\">NewCompositeTextMapPropagator</span><span style=\"color:#E1E4E8\">(</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">\t\tpropagation</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">TraceContext</span><span style=\"color:#E1E4E8\">{},</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">\t\tpropagation</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Baggage</span><span style=\"color:#E1E4E8\">{},</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t)</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">func</span><span style=\"color:#B392F0\"> newResource</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#FFAB70\">ctx</span><span style=\"color:#B392F0\"> context</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Context</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">serviceName</span><span style=\"color:#F97583\"> string</span><span style=\"color:#E1E4E8\">) (</span><span style=\"color:#F97583\">*</span><span style=\"color:#B392F0\">resource</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Resource</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#F97583\">error</span><span style=\"color:#E1E4E8\">) {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tattrs </span><span style=\"color:#F97583\">:=</span><span style=\"color:#E1E4E8\"> []</span><span style=\"color:#B392F0\">attribute</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">KeyValue</span><span style=\"color:#E1E4E8\">{</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\tsemconv.</span><span style=\"color:#B392F0\">ServiceName</span><span style=\"color:#E1E4E8\">(serviceName),</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">\treturn</span><span style=\"color:#E1E4E8\"> resource.</span><span style=\"color:#B392F0\">New</span><span style=\"color:#E1E4E8\">(ctx,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\tresource.</span><span style=\"color:#B392F0\">WithFromEnv</span><span style=\"color:#E1E4E8\">(),</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\tresource.</span><span style=\"color:#B392F0\">WithTelemetrySDK</span><span style=\"color:#E1E4E8\">(),</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\tresource.</span><span style=\"color:#B392F0\">WithProcess</span><span style=\"color:#E1E4E8\">(),</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\tresource.</span><span style=\"color:#B392F0\">WithHost</span><span style=\"color:#E1E4E8\">(),</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\tresource.</span><span style=\"color:#B392F0\">WithAttributes</span><span style=\"color:#E1E4E8\">(attrs</span><span style=\"color:#F97583\">...</span><span style=\"color:#E1E4E8\">),</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t)</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">func</span><span style=\"color:#B392F0\"> newTracerProvider</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#FFAB70\">ctx</span><span style=\"color:#B392F0\"> context</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Context</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">res</span><span style=\"color:#F97583\"> *</span><span style=\"color:#B392F0\">resource</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Resource</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">endpoint</span><span style=\"color:#F97583\"> string</span><span style=\"color:#E1E4E8\">) (</span><span style=\"color:#F97583\">*</span><span style=\"color:#B392F0\">trace</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">TracerProvider</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#F97583\">error</span><span style=\"color:#E1E4E8\">) {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\ttraceExporter, err </span><span style=\"color:#F97583\">:=</span><span style=\"color:#E1E4E8\"> otlptracegrpc.</span><span style=\"color:#B392F0\">New</span><span style=\"color:#E1E4E8\">(ctx,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\totlptracegrpc.</span><span style=\"color:#B392F0\">WithInsecure</span><span style=\"color:#E1E4E8\">(),</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\totlptracegrpc.</span><span style=\"color:#B392F0\">WithEndpoint</span><span style=\"color:#E1E4E8\">(endpoint),</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tif</span><span style=\"color:#E1E4E8\"> err </span><span style=\"color:#F97583\">!=</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\">, err</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\ttracerProvider </span><span style=\"color:#F97583\">:=</span><span style=\"color:#E1E4E8\"> trace.</span><span style=\"color:#B392F0\">NewTracerProvider</span><span style=\"color:#E1E4E8\">(</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\ttrace.</span><span style=\"color:#B392F0\">WithBatcher</span><span style=\"color:#E1E4E8\">(traceExporter,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\t\ttrace.</span><span style=\"color:#B392F0\">WithBatchTimeout</span><span style=\"color:#E1E4E8\">(time.Second)),</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\ttrace.</span><span style=\"color:#B392F0\">WithResource</span><span style=\"color:#E1E4E8\">(res),</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\treturn</span><span style=\"color:#E1E4E8\"> tracerProvider, </span><span style=\"color:#79B8FF\">nil</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">func</span><span style=\"color:#B392F0\"> newMeterProvider</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#FFAB70\">ctx</span><span style=\"color:#B392F0\"> context</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Context</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">res</span><span style=\"color:#F97583\"> *</span><span style=\"color:#B392F0\">resource</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Resource</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">endpoint</span><span style=\"color:#F97583\"> string</span><span style=\"color:#E1E4E8\">) (</span><span style=\"color:#F97583\">*</span><span style=\"color:#B392F0\">metric</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">MeterProvider</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#F97583\">error</span><span style=\"color:#E1E4E8\">) {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tmetricExporter, err </span><span style=\"color:#F97583\">:=</span><span style=\"color:#E1E4E8\"> otlpmetricgrpc.</span><span style=\"color:#B392F0\">New</span><span style=\"color:#E1E4E8\">(ctx,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\totlpmetricgrpc.</span><span style=\"color:#B392F0\">WithInsecure</span><span style=\"color:#E1E4E8\">(),</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\totlpmetricgrpc.</span><span style=\"color:#B392F0\">WithEndpoint</span><span style=\"color:#E1E4E8\">(endpoint),</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tif</span><span style=\"color:#E1E4E8\"> err </span><span style=\"color:#F97583\">!=</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\">, err</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tmeterProvider </span><span style=\"color:#F97583\">:=</span><span style=\"color:#E1E4E8\"> metric.</span><span style=\"color:#B392F0\">NewMeterProvider</span><span style=\"color:#E1E4E8\">(</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\tmetric.</span><span style=\"color:#B392F0\">WithReader</span><span style=\"color:#E1E4E8\">(metric.</span><span style=\"color:#B392F0\">NewPeriodicReader</span><span style=\"color:#E1E4E8\">(metricExporter,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\t\tmetric.</span><span style=\"color:#B392F0\">WithInterval</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#79B8FF\">3</span><span style=\"color:#F97583\">*</span><span style=\"color:#E1E4E8\">time.Second))),</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\tmetric.</span><span style=\"color:#B392F0\">WithResource</span><span style=\"color:#E1E4E8\">(res),</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\treturn</span><span style=\"color:#E1E4E8\"> meterProvider, </span><span style=\"color:#79B8FF\">nil</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">func</span><span style=\"color:#B392F0\"> newLoggerProvider</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#FFAB70\">ctx</span><span style=\"color:#B392F0\"> context</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Context</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">res</span><span style=\"color:#F97583\"> *</span><span style=\"color:#B392F0\">resource</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">Resource</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">endpoint</span><span style=\"color:#F97583\"> string</span><span style=\"color:#E1E4E8\">) (</span><span style=\"color:#F97583\">*</span><span style=\"color:#B392F0\">log</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">LoggerProvider</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#F97583\">error</span><span style=\"color:#E1E4E8\">) {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tlogExporter, err </span><span style=\"color:#F97583\">:=</span><span style=\"color:#E1E4E8\"> otlploggrpc.</span><span style=\"color:#B392F0\">New</span><span style=\"color:#E1E4E8\">(ctx,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\totlploggrpc.</span><span style=\"color:#B392F0\">WithInsecure</span><span style=\"color:#E1E4E8\">(),</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\totlploggrpc.</span><span style=\"color:#B392F0\">WithEndpoint</span><span style=\"color:#E1E4E8\">(endpoint),</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\tif</span><span style=\"color:#E1E4E8\"> err </span><span style=\"color:#F97583\">!=</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\t\treturn</span><span style=\"color:#79B8FF\"> nil</span><span style=\"color:#E1E4E8\">, err</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\tloggerProvider </span><span style=\"color:#F97583\">:=</span><span style=\"color:#E1E4E8\"> log.</span><span style=\"color:#B392F0\">NewLoggerProvider</span><span style=\"color:#E1E4E8\">(</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\tlog.</span><span style=\"color:#B392F0\">WithProcessor</span><span style=\"color:#E1E4E8\">(log.</span><span style=\"color:#B392F0\">NewBatchProcessor</span><span style=\"color:#E1E4E8\">(logExporter)),</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t\tlog.</span><span style=\"color:#B392F0\">WithResource</span><span style=\"color:#E1E4E8\">(res),</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">\t)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">\treturn</span><span style=\"color:#E1E4E8\"> loggerProvider, </span><span style=\"color:#79B8FF\">nil</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span>\n<span class=\"line\"></span></code></pre>"
  }
]